@page "/Error"
@using System.Diagnostics
@using Microsoft.AspNetCore.Authorization
@attribute [AllowAnonymous]

<PageTitle>Error - PayGuard AI</PageTitle>

<MudContainer MaxWidth="MaxWidth.Small" Class="d-flex flex-column align-center justify-center" Style="min-height: 60vh;">
    <MudIcon Icon="@Icons.Material.Filled.ErrorOutline" Style="font-size: 5rem;" Color="Color.Error" Class="mb-4" />
    <MudText Typo="Typo.h4" Class="mb-2">Something went wrong</MudText>
    <MudText Typo="Typo.body1" Color="Color.Secondary" Class="mb-4">An unexpected error occurred. Please try again.</MudText>
    @if (ShowRequestId)
    {
        <MudText Typo="Typo.caption" Color="Color.Secondary" Class="mb-4">Request ID: @RequestId</MudText>
    }
    <MudButton Variant="Variant.Filled" Color="Color.Primary" Href="/">Back to Dashboard</MudButton>
</MudContainer>

@code{
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }

    private string? RequestId { get; set; }
    private bool ShowRequestId => !string.IsNullOrEmpty(RequestId);

    protected override void OnInitialized() =>
        RequestId = Activity.Current?.Id ?? HttpContext?.TraceIdentifier;
}
